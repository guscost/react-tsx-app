define(["require", "exports", "react/jsx-runtime", "react", "lucide-react", "@/lib/utils", "@/components/ui/avatar", "@/components/ui/button", "@/components/ui/command", "@/components/ui/popover"], function (require, exports, jsx_runtime_1, React, lucide_react_1, utils_1, avatar_1, button_1, command_1, popover_1) {
    "use client";
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.ComboboxDemo = ComboboxDemo;
    const frameworks = [
        {
            value: "next.js",
            label: "Next.js",
        },
        {
            value: "sveltekit",
            label: "SvelteKit",
        },
        {
            value: "nuxt.js",
            label: "Nuxt.js",
        },
        {
            value: "remix",
            label: "Remix",
        },
        {
            value: "astro",
            label: "Astro",
        },
    ];
    const users = [
        {
            id: "1",
            username: "shadcn",
        },
        {
            id: "2",
            username: "leerob",
        },
        {
            id: "3",
            username: "evilrabbit",
        },
    ];
    const timezones = [
        {
            label: "Americas",
            timezones: [
                { value: "America/New_York", label: "(GMT-5) New York" },
                { value: "America/Los_Angeles", label: "(GMT-8) Los Angeles" },
                { value: "America/Chicago", label: "(GMT-6) Chicago" },
                { value: "America/Toronto", label: "(GMT-5) Toronto" },
                { value: "America/Vancouver", label: "(GMT-8) Vancouver" },
                { value: "America/Sao_Paulo", label: "(GMT-3) SÃ£o Paulo" },
            ],
        },
        {
            label: "Europe",
            timezones: [
                { value: "Europe/London", label: "(GMT+0) London" },
                { value: "Europe/Paris", label: "(GMT+1) Paris" },
                { value: "Europe/Berlin", label: "(GMT+1) Berlin" },
                { value: "Europe/Rome", label: "(GMT+1) Rome" },
                { value: "Europe/Madrid", label: "(GMT+1) Madrid" },
                { value: "Europe/Amsterdam", label: "(GMT+1) Amsterdam" },
            ],
        },
        {
            label: "Asia/Pacific",
            timezones: [
                { value: "Asia/Tokyo", label: "(GMT+9) Tokyo" },
                { value: "Asia/Shanghai", label: "(GMT+8) Shanghai" },
                { value: "Asia/Singapore", label: "(GMT+8) Singapore" },
                { value: "Asia/Dubai", label: "(GMT+4) Dubai" },
                { value: "Australia/Sydney", label: "(GMT+11) Sydney" },
                { value: "Asia/Seoul", label: "(GMT+9) Seoul" },
            ],
        },
    ];
    function ComboboxDemo() {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "flex w-full flex-col items-start gap-4 md:flex-row", children: [(0, jsx_runtime_1.jsx)(FrameworkCombobox, { frameworks: [...frameworks] }), (0, jsx_runtime_1.jsx)(UserCombobox, { users: [...users], selectedUserId: users[0].id }), (0, jsx_runtime_1.jsx)(TimezoneCombobox, { timezones: [...timezones], selectedTimezone: timezones[0].timezones[0] })] }));
    }
    function FrameworkCombobox({ frameworks }) {
        var _a;
        const [open, setOpen] = React.useState(false);
        const [value, setValue] = React.useState("");
        return ((0, jsx_runtime_1.jsxs)(popover_1.Popover, { open: open, onOpenChange: setOpen, children: [(0, jsx_runtime_1.jsx)(popover_1.PopoverTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", role: "combobox", "aria-expanded": open, className: "w-full justify-between md:max-w-[200px]", children: [value
                                ? (_a = frameworks.find((framework) => framework.value === value)) === null || _a === void 0 ? void 0 : _a.label
                                : "Select framework...", (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronsUpDown, { className: "text-muted-foreground" })] }) }), (0, jsx_runtime_1.jsx)(popover_1.PopoverContent, { className: "w-(--radix-popover-trigger-width) p-0", children: (0, jsx_runtime_1.jsxs)(command_1.Command, { children: [(0, jsx_runtime_1.jsx)(command_1.CommandInput, { placeholder: "Search framework..." }), (0, jsx_runtime_1.jsxs)(command_1.CommandList, { children: [(0, jsx_runtime_1.jsx)(command_1.CommandEmpty, { children: "No framework found." }), (0, jsx_runtime_1.jsx)(command_1.CommandGroup, { children: frameworks.map((framework) => ((0, jsx_runtime_1.jsxs)(command_1.CommandItem, { value: framework.value, onSelect: (currentValue) => {
                                                setValue(currentValue === value ? "" : currentValue);
                                                setOpen(false);
                                            }, children: [framework.label, (0, jsx_runtime_1.jsx)(lucide_react_1.CheckIcon, { className: (0, utils_1.cn)("ml-auto", value === framework.value ? "opacity-100" : "opacity-0") })] }, framework.value))) })] })] }) })] }));
    }
    function UserCombobox({ users, selectedUserId, }) {
        const [open, setOpen] = React.useState(false);
        const [value, setValue] = React.useState(selectedUserId);
        const selectedUser = React.useMemo(() => users.find((user) => user.id === value), [value, users]);
        return ((0, jsx_runtime_1.jsxs)(popover_1.Popover, { open: open, onOpenChange: setOpen, children: [(0, jsx_runtime_1.jsx)(popover_1.PopoverTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", role: "combobox", "aria-expanded": open, className: "w-full justify-between px-2 md:max-w-[200px]", children: [selectedUser ? ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsxs)(avatar_1.Avatar, { className: "size-5", children: [(0, jsx_runtime_1.jsx)(avatar_1.AvatarImage, { src: `https://github.com/${selectedUser.username}.png` }), (0, jsx_runtime_1.jsx)(avatar_1.AvatarFallback, { children: selectedUser.username[0] })] }), selectedUser.username] })) : ("Select user..."), (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronsUpDown, { className: "text-muted-foreground" })] }) }), (0, jsx_runtime_1.jsx)(popover_1.PopoverContent, { className: "w-(--radix-popover-trigger-width) p-0", children: (0, jsx_runtime_1.jsxs)(command_1.Command, { children: [(0, jsx_runtime_1.jsx)(command_1.CommandInput, { placeholder: "Search user..." }), (0, jsx_runtime_1.jsxs)(command_1.CommandList, { children: [(0, jsx_runtime_1.jsx)(command_1.CommandEmpty, { children: "No user found." }), (0, jsx_runtime_1.jsx)(command_1.CommandGroup, { children: users.map((user) => ((0, jsx_runtime_1.jsxs)(command_1.CommandItem, { value: user.id, onSelect: (currentValue) => {
                                                setValue(currentValue === value ? "" : currentValue);
                                                setOpen(false);
                                            }, children: [(0, jsx_runtime_1.jsxs)(avatar_1.Avatar, { className: "size-5", children: [(0, jsx_runtime_1.jsx)(avatar_1.AvatarImage, { src: `https://github.com/${user.username}.png` }), (0, jsx_runtime_1.jsx)(avatar_1.AvatarFallback, { children: user.username[0] })] }), user.username, (0, jsx_runtime_1.jsx)(lucide_react_1.CheckIcon, { className: (0, utils_1.cn)("ml-auto", value === user.id ? "opacity-100" : "opacity-0") })] }, user.id))) }), (0, jsx_runtime_1.jsx)(command_1.CommandSeparator, {}), (0, jsx_runtime_1.jsx)(command_1.CommandGroup, { children: (0, jsx_runtime_1.jsxs)(command_1.CommandItem, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.PlusCircleIcon, {}), "Create user"] }) })] })] }) })] }));
    }
    function TimezoneCombobox({ timezones, selectedTimezone, }) {
        const [open, setOpen] = React.useState(false);
        const [value, setValue] = React.useState(selectedTimezone.value);
        const selectedGroup = React.useMemo(() => timezones.find((group) => group.timezones.find((tz) => tz.value === value)), [value, timezones]);
        const selectedTimezoneLabel = React.useMemo(() => { var _a; return (_a = selectedGroup === null || selectedGroup === void 0 ? void 0 : selectedGroup.timezones.find((tz) => tz.value === value)) === null || _a === void 0 ? void 0 : _a.label; }, [value, selectedGroup]);
        return ((0, jsx_runtime_1.jsxs)(popover_1.Popover, { open: open, onOpenChange: setOpen, children: [(0, jsx_runtime_1.jsx)(popover_1.PopoverTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", className: "h-12 w-full justify-between px-2.5 md:max-w-[200px]", children: [selectedTimezone ? ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col items-start gap-0.5", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-muted-foreground text-xs font-normal", children: selectedGroup === null || selectedGroup === void 0 ? void 0 : selectedGroup.label }), (0, jsx_runtime_1.jsx)("span", { children: selectedTimezoneLabel })] })) : ("Select timezone"), (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDownIcon, { className: "text-muted-foreground" })] }) }), (0, jsx_runtime_1.jsx)(popover_1.PopoverContent, { className: "p-0", align: "start", children: (0, jsx_runtime_1.jsxs)(command_1.Command, { children: [(0, jsx_runtime_1.jsx)(command_1.CommandInput, { placeholder: "Search timezone..." }), (0, jsx_runtime_1.jsxs)(command_1.CommandList, { className: "scroll-pb-12", children: [(0, jsx_runtime_1.jsx)(command_1.CommandEmpty, { children: "No timezone found." }), timezones.map((region) => ((0, jsx_runtime_1.jsx)(command_1.CommandGroup, { heading: region.label, children: region.timezones.map((timezone) => ((0, jsx_runtime_1.jsxs)(command_1.CommandItem, { value: timezone.value, onSelect: (currentValue) => {
                                                setValue(currentValue);
                                                setOpen(false);
                                            }, children: [timezone.label, (0, jsx_runtime_1.jsx)(lucide_react_1.CheckIcon, { className: "ml-auto opacity-0 data-[selected=true]:opacity-100", "data-selected": value === timezone.value })] }, timezone.value))) }, region.label))), (0, jsx_runtime_1.jsx)(command_1.CommandSeparator, { className: "sticky bottom-10" }), (0, jsx_runtime_1.jsx)(command_1.CommandGroup, { className: "bg-popover sticky bottom-0", children: (0, jsx_runtime_1.jsxs)(command_1.CommandItem, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.PlusCircleIcon, {}), "Create timezone"] }) })] })] }) })] }));
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tYm9ib3gtZGVtby5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL2RlbW8tdjQvY29tYm9ib3gtZGVtby50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtJQUFBLFlBQVksQ0FBQzs7O0lBNEdiLG9DQVdDO0lBM0ZELE1BQU0sVUFBVSxHQUFHO1FBQ2pCO1lBQ0UsS0FBSyxFQUFFLFNBQVM7WUFDaEIsS0FBSyxFQUFFLFNBQVM7U0FDakI7UUFDRDtZQUNFLEtBQUssRUFBRSxXQUFXO1lBQ2xCLEtBQUssRUFBRSxXQUFXO1NBQ25CO1FBQ0Q7WUFDRSxLQUFLLEVBQUUsU0FBUztZQUNoQixLQUFLLEVBQUUsU0FBUztTQUNqQjtRQUNEO1lBQ0UsS0FBSyxFQUFFLE9BQU87WUFDZCxLQUFLLEVBQUUsT0FBTztTQUNmO1FBQ0Q7WUFDRSxLQUFLLEVBQUUsT0FBTztZQUNkLEtBQUssRUFBRSxPQUFPO1NBQ2Y7S0FDRixDQUFDO0lBSUYsTUFBTSxLQUFLLEdBQUc7UUFDWjtZQUNFLEVBQUUsRUFBRSxHQUFHO1lBQ1AsUUFBUSxFQUFFLFFBQVE7U0FDbkI7UUFDRDtZQUNFLEVBQUUsRUFBRSxHQUFHO1lBQ1AsUUFBUSxFQUFFLFFBQVE7U0FDbkI7UUFDRDtZQUNFLEVBQUUsRUFBRSxHQUFHO1lBQ1AsUUFBUSxFQUFFLFlBQVk7U0FDdkI7S0FDTyxDQUFDO0lBSVgsTUFBTSxTQUFTLEdBQUc7UUFDaEI7WUFDRSxLQUFLLEVBQUUsVUFBVTtZQUNqQixTQUFTLEVBQUU7Z0JBQ1QsRUFBRSxLQUFLLEVBQUUsa0JBQWtCLEVBQUUsS0FBSyxFQUFFLGtCQUFrQixFQUFFO2dCQUN4RCxFQUFFLEtBQUssRUFBRSxxQkFBcUIsRUFBRSxLQUFLLEVBQUUscUJBQXFCLEVBQUU7Z0JBQzlELEVBQUUsS0FBSyxFQUFFLGlCQUFpQixFQUFFLEtBQUssRUFBRSxpQkFBaUIsRUFBRTtnQkFDdEQsRUFBRSxLQUFLLEVBQUUsaUJB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XCI7XG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgQ2hlY2tJY29uLFxuICBDaGV2cm9uRG93bkljb24sXG4gIENoZXZyb25zVXBEb3duLFxuICBQbHVzQ2lyY2xlSWNvbixcbn0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuXG5pbXBvcnQgeyBjbiB9IGZyb20gXCJAL2xpYi91dGlsc1wiO1xuaW1wb3J0IHsgQXZhdGFyLCBBdmF0YXJGYWxsYmFjaywgQXZhdGFySW1hZ2UgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2F2YXRhclwiO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9idXR0b25cIjtcbmltcG9ydCB7XG4gIENvbW1hbmQsXG4gIENvbW1hbmRFbXB0eSxcbiAgQ29tbWFuZEdyb3VwLFxuICBDb21tYW5kSW5wdXQsXG4gIENvbW1hbmRJdGVtLFxuICBDb21tYW5kTGlzdCxcbiAgQ29tbWFuZFNlcGFyYXRvcixcbn0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9jb21tYW5kXCI7XG5pbXBvcnQge1xuICBQb3BvdmVyLFxuICBQb3BvdmVyQ29udGVudCxcbiAgUG9wb3ZlclRyaWdnZXIsXG59IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvcG9wb3ZlclwiO1xuXG5jb25zdCBmcmFtZXdvcmtzID0gW1xuICB7XG4gICAgdmFsdWU6IFwibmV4dC5qc1wiLFxuICAgIGxhYmVsOiBcIk5leHQuanNcIixcbiAgfSxcbiAge1xuICAgIHZhbHVlOiBcInN2ZWx0ZWtpdFwiLFxuICAgIGxhYmVsOiBcIlN2ZWx0ZUtpdFwiLFxuICB9LFxuICB7XG4gICAgdmFsdWU6IFwibnV4dC5qc1wiLFxuICAgIGxhYmVsOiBcIk51eHQuanNcIixcbiAgfSxcbiAge1xuICAgIHZhbHVlOiBcInJlbWl4XCIsXG4gICAgbGFiZWw6IFwiUmVtaXhcIixcbiAgfSxcbiAge1xuICAgIHZhbHVlOiBcImFzdHJvXCIsXG4gICAgbGFiZWw6IFwiQXN0cm9cIixcbiAgfSxcbl07XG5cbnR5cGUgRnJhbWV3b3JrID0gKHR5cGVvZiBmcmFtZXdvcmtzKVtudW1iZXJdO1xuXG5jb25zdCB1c2VycyA9IFtcbiAge1xuICAgIGlkOiBcIjFcIixcbiAgICB1c2VybmFtZTogXCJzaGFkY25cIixcbiAgfSxcbiAge1xuICAgIGlkOiBcIjJcIixcbiAgICB1c2VybmFtZTogXCJsZWVyb2JcIixcbiAgfSxcbiAge1xuICAgIGlkOiBcIjNcIixcbiAgICB1c2VybmFtZTogXCJldmlscmFiYml0XCIsXG4gIH0sXG5dIGFzIGNvbnN0O1xuXG50eXBlIFVzZXIgPSAodHlwZW9mIHVzZXJzKVtudW1iZXJdO1xuXG5jb25zdCB0aW1lem9uZXMgPSBbXG4gIHtcbiAgICBsYWJlbDogXCJBbWVyaWNhc1wiLFxuICAgIHRpbWV6b25lczogW1xuICAgICAgeyB2YWx1ZTogXCJBbWVyaWNhL05ld19Zb3JrXCIsIGxhYmVsOiBcIihHTVQtNSkgTmV3IFlvcmtcIiB9LFxuICAgICAgeyB2YWx1ZTogXCJBbWVyaWNhL0xvc19BbmdlbGVzXCIsIGxhYmVsOiBcIihHTVQtOCkgTG9zIEFuZ2VsZXNcIiB9LFxuICAgICAgeyB2YWx1ZTogXCJBbWVyaWNhL0NoaWNhZ29cIiwgbGFiZWw6IFwiKEdNVC02KSBDaGljYWdvXCIgfSxcbiAgICAgIHsgdmFsdWU6IFwiQW1lcmljYS9Ub3JvbnRvXCIsIGxhYmVsOiBcIihHTVQtNSkgVG9yb250b1wiIH0sXG4gICAgICB7IHZhbHVlOiBcIkFtZXJpY2EvVmFuY291dmVyXCIsIGxhYmVsOiBcIihHTVQtOCkgVmFuY291dmVyXCIgfSxcbiAgICAgIHsgdmFsdWU6IFwiQW1lcmljYS9TYW9fUGF1bG9cIiwgbGFiZWw6IFwiKEdNVC0zKSBTw6NvIFBhdWxvXCIgfSxcbiAgICBdLFxuICB9LFxuICB7XG4gICAgbGFiZWw6IFwiRXVyb3BlXCIsXG4gICAgdGltZXpvbmVzOiBbXG4gICAgICB7IHZhbHVlOiBcIkV1cm9wZS9Mb25kb25cIiwgbGFiZWw6IFwiKEdNVCswKSBMb25kb25cIiB9LFxuICAgICAgeyB2YWx1ZTogXCJFdXJvcGUvUGFyaXNcIiwgbGFiZWw6IFwiKEdNVCsxKSBQYXJpc1wiIH0sXG4gICAgICB7IHZhbHVlOiBcIkV1cm9wZS9CZXJsaW5cIiwgbGFiZWw6IFwiKEdNVCsxKSBCZXJsaW5cIiB9LFxuICAgICAgeyB2YWx1ZTogXCJFdXJvcGUvUm9tZVwiLCBsYWJlbDogXCIoR01UKzEpIFJvbWVcIiB9LFxuICAgICAgeyB2YWx1ZTogXCJFdXJvcGUvTWFkcmlkXCIsIGxhYmVsOiBcIihHTVQrMSkgTWFkcmlkXCIgfSxcbiAgICAgIHsgdmFsdWU6IFwiRXVyb3BlL0Ftc3RlcmRhbVwiLCBsYWJlbDogXCIoR01UKzEpIEFtc3RlcmRhbVwiIH0sXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIGxhYmVsOiBcIkFzaWEvUGFjaWZpY1wiLFxuICAgIHRpbWV6b25lczogW1xuICAgICAgeyB2YWx1ZTogXCJBc2lhL1Rva3lvXCIsIGxhYmVsOiBcIihHTVQrOSkgVG9reW9cIiB9LFxuICAgICAgeyB2YWx1ZTogXCJBc2lhL1NoYW5naGFpXCIsIGxhYmVsOiBcIihHTVQrOCkgU2hhbmdoYWlcIiB9LFxuICAgICAgeyB2YWx1ZTogXCJBc2lhL1NpbmdhcG9yZVwiLCBsYWJlbDogXCIoR01UKzgpIFNpbmdhcG9yZVwiIH0sXG4gICAgICB7IHZhbHVlOiBcIkFzaWEvRHViYWlcIiwgbGFiZWw6IFwiKEdNVCs0KSBEdWJhaVwiIH0sXG4gICAgICB7IHZhbHVlOiBcIkF1c3RyYWxpYS9TeWRuZXlcIiwgbGFiZWw6IFwiKEdNVCsxMSkgU3lkbmV5XCIgfSxcbiAgICAgIHsgdmFsdWU6IFwiQXNpYS9TZW91bFwiLCBsYWJlbDogXCIoR01UKzkpIFNlb3VsXCIgfSxcbiAgICBdLFxuICB9LFxuXSBhcyBjb25zdDtcblxudHlwZSBUaW1lem9uZSA9ICh0eXBlb2YgdGltZXpvbmVzKVtudW1iZXJdO1xuXG5leHBvcnQgZnVuY3Rpb24gQ29tYm9ib3hEZW1vKCkge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgZmxleC1jb2wgaXRlbXMtc3RhcnQgZ2FwLTQgbWQ6ZmxleC1yb3dcIj5cbiAgICAgIDxGcmFtZXdvcmtDb21ib2JveCBmcmFtZXdvcmtzPXtbLi4uZnJhbWV3b3Jrc119IC8+XG4gICAgICA8VXNlckNvbWJvYm94IHVzZXJzPXtbLi4udXNlcnNdfSBzZWxlY3RlZFVzZXJJZD17dXNlcnNbMF0uaWR9IC8+XG4gICAgICA8VGltZXpvbmVDb21ib2JveFxuICAgICAgICB0aW1lem9uZXM9e1suLi50aW1lem9uZXNdfVxuICAgICAgICBzZWxlY3RlZFRpbWV6b25lPXt0aW1lem9uZXNbMF0udGltZXpvbmVzWzBdfVxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZnVuY3Rpb24gRnJhbWV3b3JrQ29tYm9ib3goeyBmcmFtZXdvcmtzIH06IHsgZnJhbWV3b3JrczogRnJhbWV3b3JrW10gfSkge1xuICBjb25zdCBbb3Blbiwgc2V0T3Blbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gUmVhY3QudXNlU3RhdGUoXCJcIik7XG5cbiAgcmV0dXJuIChcbiAgICA8UG9wb3ZlciBvcGVuPXtvcGVufSBvbk9wZW5DaGFuZ2U9e3NldE9wZW59PlxuICAgICAgPFBvcG92ZXJUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXG4gICAgICAgICAgcm9sZT1cImNvbWJvYm94XCJcbiAgICAgICAgICBhcmlhLWV4cGFuZGVkPXtvcGVufVxuICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBqdXN0aWZ5LWJldHdlZW4gbWQ6bWF4LXctWzIwMHB4XVwiXG4gICAgICAgID5cbiAgICAgICAgICB7dmFsdWVcbiAgICAgICAgICAgID8gZnJhbWV3b3Jrcy5maW5kKChmcmFtZXdvcmspID0+IGZyYW1ld29yay52YWx1ZSA9PT0gdmFsdWUpPy5sYWJlbFxuICAgICAgICAgICAgOiBcIlNlbGVjdCBmcmFtZXdvcmsuLi5cIn1cbiAgICAgICAgICA8Q2hldnJvbnNVcERvd24gY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCIgLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L1BvcG92ZXJUcmlnZ2VyPlxuICAgICAgPFBvcG92ZXJDb250ZW50IGNsYXNzTmFtZT1cInctKC0tcmFkaXgtcG9wb3Zlci10cmlnZ2VyLXdpZHRoKSBwLTBcIj5cbiAgICAgICAgPENvbW1hbmQ+XG4gICAgICAgICAgPENvbW1hbmRJbnB1dCBwbGFjZWhvbGRlcj1cIlNlYXJjaCBmcmFtZXdvcmsuLi5cIiAvPlxuICAgICAgICAgIDxDb21tYW5kTGlzdD5cbiAgICAgICAgICAgIDxDb21tYW5kRW1wdHk+Tm8gZnJhbWV3b3JrIGZvdW5kLjwvQ29tbWFuZEVtcHR5PlxuICAgICAgICAgICAgPENvbW1hbmRHcm91cD5cbiAgICAgICAgICAgICAge2ZyYW1ld29ya3MubWFwKChmcmFtZXdvcmspID0+IChcbiAgICAgICAgICAgICAgICA8Q29tbWFuZEl0ZW1cbiAgICAgICAgICAgICAgICAgIGtleT17ZnJhbWV3b3JrLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZyYW1ld29yay52YWx1ZX1cbiAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXsoY3VycmVudFZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFZhbHVlKGN1cnJlbnRWYWx1ZSA9PT0gdmFsdWUgPyBcIlwiIDogY3VycmVudFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0T3BlbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtmcmFtZXdvcmsubGFiZWx9XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tJY29uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgICAgICAgICAgICAgXCJtbC1hdXRvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IGZyYW1ld29yay52YWx1ZSA/IFwib3BhY2l0eS0xMDBcIiA6IFwib3BhY2l0eS0wXCIsXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvQ29tbWFuZEl0ZW0+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9Db21tYW5kR3JvdXA+XG4gICAgICAgICAgPC9Db21tYW5kTGlzdD5cbiAgICAgICAgPC9Db21tYW5kPlxuICAgICAgPC9Qb3BvdmVyQ29udGVudD5cbiAgICA8L1BvcG92ZXI+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFVzZXJDb21ib2JveCh7XG4gIHVzZXJzLFxuICBzZWxlY3RlZFVzZXJJZCxcbn06IHtcbiAgdXNlcnM6IFVzZXJbXTtcbiAgc2VsZWN0ZWRVc2VySWQ6IHN0cmluZztcbn0pIHtcbiAgY29uc3QgW29wZW4sIHNldE9wZW5dID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKHNlbGVjdGVkVXNlcklkKTtcblxuICBjb25zdCBzZWxlY3RlZFVzZXIgPSBSZWFjdC51c2VNZW1vKFxuICAgICgpID0+IHVzZXJzLmZpbmQoKHVzZXIpID0+IHVzZXIuaWQgPT09IHZhbHVlKSxcbiAgICBbdmFsdWUsIHVzZXJzXSxcbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxQb3BvdmVyIG9wZW49e29wZW59IG9uT3BlbkNoYW5nZT17c2V0T3Blbn0+XG4gICAgICA8UG9wb3ZlclRyaWdnZXIgYXNDaGlsZD5cbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICByb2xlPVwiY29tYm9ib3hcIlxuICAgICAgICAgIGFyaWEtZXhwYW5kZWQ9e29wZW59XG4gICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGp1c3RpZnktYmV0d2VlbiBweC0yIG1kOm1heC13LVsyMDBweF1cIlxuICAgICAgICA+XG4gICAgICAgICAge3NlbGVjdGVkVXNlciA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgPEF2YXRhciBjbGFzc05hbWU9XCJzaXplLTVcIj5cbiAgICAgICAgICAgICAgICA8QXZhdGFySW1hZ2VcbiAgICAgICAgICAgICAgICAgIHNyYz17YGh0dHBzOi8vZ2l0aHViLmNvbS8ke3NlbGVjdGVkVXNlci51c2VybmFtZX0ucG5nYH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxBdmF0YXJGYWxsYmFjaz57c2VsZWN0ZWRVc2VyLnVzZXJuYW1lWzBdfTwvQXZhdGFyRmFsbGJhY2s+XG4gICAgICAgICAgICAgIDwvQXZhdGFyPlxuICAgICAgICAgICAgICB7c2VsZWN0ZWRVc2VyLnVzZXJuYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIFwiU2VsZWN0IHVzZXIuLi5cIlxuICAgICAgICAgICl9XG4gICAgICAgICAgPENoZXZyb25zVXBEb3duIGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiIC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9Qb3BvdmVyVHJpZ2dlcj5cbiAgICAgIDxQb3BvdmVyQ29udGVudCBjbGFzc05hbWU9XCJ3LSgtLXJhZGl4LXBvcG92ZXItdHJpZ2dlci13aWR0aCkgcC0wXCI+XG4gICAgICAgIDxDb21tYW5kPlxuICAgICAgICAgIDxDb21tYW5kSW5wdXQgcGxhY2Vob2xkZXI9XCJTZWFyY2ggdXNlci4uLlwiIC8+XG4gICAgICAgICAgPENvbW1hbmRMaXN0PlxuICAgICAgICAgICAgPENvbW1hbmRFbXB0eT5ObyB1c2VyIGZvdW5kLjwvQ29tbWFuZEVtcHR5PlxuICAgICAgICAgICAgPENvbW1hbmRHcm91cD5cbiAgICAgICAgICAgICAge3VzZXJzLm1hcCgodXNlcikgPT4gKFxuICAgICAgICAgICAgICAgIDxDb21tYW5kSXRlbVxuICAgICAgICAgICAgICAgICAga2V5PXt1c2VyLmlkfVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3VzZXIuaWR9XG4gICAgICAgICAgICAgICAgICBvblNlbGVjdD17KGN1cnJlbnRWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRWYWx1ZShjdXJyZW50VmFsdWUgPT09IHZhbHVlID8gXCJcIiA6IGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNldE9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8QXZhdGFyIGNsYXNzTmFtZT1cInNpemUtNVwiPlxuICAgICAgICAgICAgICAgICAgICA8QXZhdGFySW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICBzcmM9e2BodHRwczovL2dpdGh1Yi5jb20vJHt1c2VyLnVzZXJuYW1lfS5wbmdgfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8QXZhdGFyRmFsbGJhY2s+e3VzZXIudXNlcm5hbWVbMF19PC9BdmF0YXJGYWxsYmFjaz5cbiAgICAgICAgICAgICAgICAgIDwvQXZhdGFyPlxuICAgICAgICAgICAgICAgICAge3VzZXIudXNlcm5hbWV9XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tJY29uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgICAgICAgICAgICAgXCJtbC1hdXRvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IHVzZXIuaWQgPyBcIm9wYWNpdHktMTAwXCIgOiBcIm9wYWNpdHktMFwiLFxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0NvbW1hbmRJdGVtPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvQ29tbWFuZEdyb3VwPlxuICAgICAgICAgICAgPENvbW1hbmRTZXBhcmF0b3IgLz5cbiAgICAgICAgICAgIDxDb21tYW5kR3JvdXA+XG4gICAgICAgICAgICAgIDxDb21tYW5kSXRlbT5cbiAgICAgICAgICAgICAgICA8UGx1c0NpcmNsZUljb24gLz5cbiAgICAgICAgICAgICAgICBDcmVhdGUgdXNlclxuICAgICAgICAgICAgICA8L0NvbW1hbmRJdGVtPlxuICAgICAgICAgICAgPC9Db21tYW5kR3JvdXA+XG4gICAgICAgICAgPC9Db21tYW5kTGlzdD5cbiAgICAgICAgPC9Db21tYW5kPlxuICAgICAgPC9Qb3BvdmVyQ29udGVudD5cbiAgICA8L1BvcG92ZXI+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFRpbWV6b25lQ29tYm9ib3goe1xuICB0aW1lem9uZXMsXG4gIHNlbGVjdGVkVGltZXpvbmUsXG59OiB7XG4gIHRpbWV6b25lczogVGltZXpvbmVbXTtcbiAgc2VsZWN0ZWRUaW1lem9uZTogVGltZXpvbmVbXCJ0aW1lem9uZXNcIl1bbnVtYmVyXTtcbn0pIHtcbiAgY29uc3QgW29wZW4sIHNldE9wZW5dID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKHNlbGVjdGVkVGltZXpvbmUudmFsdWUpO1xuXG4gIGNvbnN0IHNlbGVjdGVkR3JvdXAgPSBSZWFjdC51c2VNZW1vKFxuICAgICgpID0+XG4gICAgICB0aW1lem9uZXMuZmluZCgoZ3JvdXApID0+XG4gICAgICAgIGdyb3VwLnRpbWV6b25lcy5maW5kKCh0eikgPT4gdHoudmFsdWUgPT09IHZhbHVlKSxcbiAgICAgICksXG4gICAgW3ZhbHVlLCB0aW1lem9uZXNdLFxuICApO1xuXG4gIGNvbnN0IHNlbGVjdGVkVGltZXpvbmVMYWJlbCA9IFJlYWN0LnVzZU1lbW8oXG4gICAgKCkgPT4gc2VsZWN0ZWRHcm91cD8udGltZXpvbmVzLmZpbmQoKHR6KSA9PiB0ei52YWx1ZSA9PT0gdmFsdWUpPy5sYWJlbCxcbiAgICBbdmFsdWUsIHNlbGVjdGVkR3JvdXBdLFxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPFBvcG92ZXIgb3Blbj17b3Blbn0gb25PcGVuQ2hhbmdlPXtzZXRPcGVufT5cbiAgICAgIDxQb3BvdmVyVHJpZ2dlciBhc0NoaWxkPlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxuICAgICAgICAgIGNsYXNzTmFtZT1cImgtMTIgdy1mdWxsIGp1c3RpZnktYmV0d2VlbiBweC0yLjUgbWQ6bWF4LXctWzIwMHB4XVwiXG4gICAgICAgID5cbiAgICAgICAgICB7c2VsZWN0ZWRUaW1lem9uZSA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1zdGFydCBnYXAtMC41XCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZCB0ZXh0LXhzIGZvbnQtbm9ybWFsXCI+XG4gICAgICAgICAgICAgICAge3NlbGVjdGVkR3JvdXA/LmxhYmVsfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuPntzZWxlY3RlZFRpbWV6b25lTGFiZWx9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIFwiU2VsZWN0IHRpbWV6b25lXCJcbiAgICAgICAgICApfVxuICAgICAgICAgIDxDaGV2cm9uRG93bkljb24gY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCIgLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L1BvcG92ZXJUcmlnZ2VyPlxuICAgICAgPFBvcG92ZXJDb250ZW50IGNsYXNzTmFtZT1cInAtMFwiIGFsaWduPVwic3RhcnRcIj5cbiAgICAgICAgPENvbW1hbmQ+XG4gICAgICAgICAgPENvbW1hbmRJbnB1dCBwbGFjZWhvbGRlcj1cIlNlYXJjaCB0aW1lem9uZS4uLlwiIC8+XG4gICAgICAgICAgPENvbW1hbmRMaXN0IGNsYXNzTmFtZT1cInNjcm9sbC1wYi0xMlwiPlxuICAgICAgICAgICAgPENvbW1hbmRFbXB0eT5ObyB0aW1lem9uZSBmb3VuZC48L0NvbW1hbmRFbXB0eT5cbiAgICAgICAgICAgIHt0aW1lem9uZXMubWFwKChyZWdpb24pID0+IChcbiAgICAgICAgICAgICAgPENvbW1hbmRHcm91cCBrZXk9e3JlZ2lvbi5sYWJlbH0gaGVhZGluZz17cmVnaW9uLmxhYmVsfT5cbiAgICAgICAgICAgICAgICB7cmVnaW9uLnRpbWV6b25lcy5tYXAoKHRpbWV6b25lKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8Q29tbWFuZEl0ZW1cbiAgICAgICAgICAgICAgICAgICAga2V5PXt0aW1lem9uZS52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RpbWV6b25lLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICBvblNlbGVjdD17KGN1cnJlbnRWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldFZhbHVlKFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlIGFzIFRpbWV6b25lW1widGltZXpvbmVzXCJdW251bWJlcl1bXCJ2YWx1ZVwiXSxcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgIHNldE9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7dGltZXpvbmUubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgIDxDaGVja0ljb25cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtbC1hdXRvIG9wYWNpdHktMCBkYXRhLVtzZWxlY3RlZD10cnVlXTpvcGFjaXR5LTEwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS1zZWxlY3RlZD17dmFsdWUgPT09IHRpbWV6b25lLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9Db21tYW5kSXRlbT5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9Db21tYW5kR3JvdXA+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDxDb21tYW5kU2VwYXJhdG9yIGNsYXNzTmFtZT1cInN0aWNreSBib3R0b20tMTBcIiAvPlxuICAgICAgICAgICAgPENvbW1hbmRHcm91cCBjbGFzc05hbWU9XCJiZy1wb3BvdmVyIHN0aWNreSBib3R0b20tMFwiPlxuICAgICAgICAgICAgICA8Q29tbWFuZEl0ZW0+XG4gICAgICAgICAgICAgICAgPFBsdXNDaXJjbGVJY29uIC8+XG4gICAgICAgICAgICAgICAgQ3JlYXRlIHRpbWV6b25lXG4gICAgICAgICAgICAgIDwvQ29tbWFuZEl0ZW0+XG4gICAgICAgICAgICA8L0NvbW1hbmRHcm91cD5cbiAgICAgICAgICA8L0NvbW1hbmRMaXN0PlxuICAgICAgICA8L0NvbW1hbmQ+XG4gICAgICA8L1BvcG92ZXJDb250ZW50PlxuICAgIDwvUG9wb3Zlcj5cbiAgKTtcbn1cbiJdfQ==